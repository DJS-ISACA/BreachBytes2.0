from flask import Flask, request, make_response, render_template

app = Flask(__name__)

@app.route('/')
def index():
    # Check for the cookie 'T1m3-P3r10d' with the value 'infinity'
    cookie_value = request.cookies.get('T1m3-P3r10d')

    if cookie_value == 'infinity':
        message = "Now I can play for eternity. Thanks for it, here is your flag:"
        flag = "DJSISACA{Pl4y_c0c_w1th_m3_f0r3v3r}"
    else:
        message = "The battle only lasts for 3 minutes... I want to play for the T1m3-P3r10d of eternity. If someone can make it happen, I'll grant the most required mythical item"
        flag = None

    # Create a response object
    response = make_response(render_template('index.html', message=message, flag=flag))

    # Clear the 'T1m3-P3r10d' cookie by setting its expiration to a past date
    response.set_cookie('T1m3-P3r10d', '', max_age=0)

    return response

if __name__ == '__main__':
    app.run(debug=True , host='0.0.0.0' , port=5001)
